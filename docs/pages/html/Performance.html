

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Performance &mdash; distfit distfit documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Save and Load" href="Save and Load.html" />
    <link rel="prev" title="Algorithm" href="Algorithm.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> distfit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Background</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Abstract.html">Abstract</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html#uninstalling">Uninstalling</a></li>
</ul>
<p class="caption"><span class="caption-text">Methods</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Algorithm.html">Algorithm</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parameter-fitting">Parameter fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#probability-density-function-fitting">Probability Density Function fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#varying-sample-size">Varying sample size</a></li>
<li class="toctree-l2"><a class="reference internal" href="#smoothing-window">Smoothing window</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Save and Load.html">Save and Load</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Code Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Coding quality.html">Coding quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="distfit.distfit.html">API References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">distfit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Performance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Performance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <hr class="docutils" id="code-directive" />
<div class="section" id="performance">
<h1>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h1>
<p>The performance of <code class="docutils literal notranslate"><span class="pre">distfit</span></code> can be examined by various aspects. In this section we will evaluate the detected parameters, and the goodness of fit of the detected probability density function (pdf).</p>
<div class="section" id="parameter-fitting">
<h2>Parameter fitting<a class="headerlink" href="#parameter-fitting" title="Permalink to this headline">¶</a></h2>
<p>Lets evalute the performance of <code class="docutils literal notranslate"><span class="pre">distfit</span></code> of the detected parameters when we draw random samples from a normal (Gaussian) distribution with <em>mu*=0 and *std*=2. We would expect to find *mu</em> and <em>std</em> very close to the input values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">distfit</span> <span class="kn">import</span> <span class="n">distfit</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># Initialize model and specify distribution to be normal</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
<p>For demonstration puprposes we pre-specify the <code class="docutils literal notranslate"><span class="pre">normal</span></code> distribution to find the best parameters. When we do that, as shown below, a <em>mean</em> or <em>loc</em> of <strong>0.004</strong> is detected and a standard deviation (scale) with <strong>2.02</strong> which is very close to our input parameters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dist</span> <span class="o">=</span> <span class="n">distfit</span><span class="p">(</span><span class="n">distr</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>
<span class="n">dist</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dist</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>

<span class="c1"># {&#39;distr&#39;: &lt;scipy.stats._continuous_distns.norm_gen at 0x15d8406b208&gt;,</span>
<span class="c1">#  &#39;params&#39;: (0.00444619012906402, 2.0209991080448138),</span>
<span class="c1">#  &#39;name&#39;: &#39;norm&#39;,</span>
<span class="c1">#  &#39;RSS&#39;: 0.0021541850376229827,</span>
<span class="c1">#  &#39;loc&#39;: 0.00444619012906402,</span>
<span class="c1">#  &#39;scale&#39;: 2.0209991080448138,</span>
<span class="c1">#  &#39;arg&#39;: (),</span>
<span class="c1">#  &#39;CII_min_alpha&#39;: -3.319801522804139,</span>
<span class="c1">#  &#39;CII_max_alpha&#39;: 3.328693903062266}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dist</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="gaus-mu-0">
<a class="reference internal image-reference" href="_images/gaus_mu_0.png"><img alt="_images/gaus_mu_0.png" src="_images/gaus_mu_0.png" style="width: 492.0px; height: 420.8px;" /></a>
</div>
</div>
<div class="section" id="probability-density-function-fitting">
<h2>Probability Density Function fitting<a class="headerlink" href="#probability-density-function-fitting" title="Permalink to this headline">¶</a></h2>
<p>To measure the goodness of fit of <em>pdfs</em>, we will evaluate multiple <em>pdfs</em> using the <strong>RSS</strong> metrics. The goodness of fit scores are stored in <code class="docutils literal notranslate"><span class="pre">dist.summary</span></code>. In this example, we will <strong>not</strong> specify any distribution but only provide the emperical data to the model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dist</span> <span class="o">=</span> <span class="n">distfit</span><span class="p">()</span>
<span class="n">dist</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dist</span><span class="o">.</span><span class="n">summary</span><span class="p">)</span>

<span class="c1">#   distr         RSS  ...        scale                                     arg</span>
<span class="c1"># 0        norm  0.00215419  ...        2.021                                      ()</span>
<span class="c1"># 1           t  0.00215429  ...      2.02105                    (2734197.302263666,)</span>
<span class="c1"># 2       gamma  0.00216592  ...   0.00599666                   (113584.76147029496,)</span>
<span class="c1"># 3        beta  0.00220002  ...      39.4803  (46.39522231565038, 47.98055489856441)</span>
<span class="c1"># 4     lognorm  0.00226011  ...      139.173                 (0.014515926633415211,)</span>
<span class="c1"># 5  genextreme  0.00370334  ...      2.01326                   (0.2516817342848604,)</span>
<span class="c1"># 6    dweibull  0.00617939  ...        1.732                   (1.2681369071313497,)</span>
<span class="c1"># 7     uniform    0.244839  ...      14.3579                                      ()</span>
<span class="c1"># 8      pareto    0.358765  ...  2.40844e+08                   (31772216.567824945,)</span>
<span class="c1"># 9       expon    0.360553  ...      7.51848                                      ()</span>
</pre></div>
</div>
<p>The model detected <code class="docutils literal notranslate"><span class="pre">normal</span></code> as the <strong>best</strong> pdf but a good RSS score is also detected for the <em>t</em> and <em>gamma</em> distribution. But this is not unexpected to see. A summary plot of the evaluated pdfs looks a following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dist</span><span class="o">.</span><span class="n">plot_summary</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="gaus-mu-0-summary">
<a class="reference internal image-reference" href="_images/gaus_mu_0_summary.png"><img alt="_images/gaus_mu_0_summary.png" src="_images/gaus_mu_0_summary.png" style="width: 710.4000000000001px; height: 425.6px;" /></a>
</div>
</div>
<div class="section" id="varying-sample-size">
<h2>Varying sample size<a class="headerlink" href="#varying-sample-size" title="Permalink to this headline">¶</a></h2>
<p>The goodness of fit will change according the number of samples that is provided. In the example above we specified 5000 samples which gave good results. However, with a relative low number of samples, a poor fit can occur. For demonstration purposes we will vary the number of samples and store the <em>mu</em>, <em>std</em> and detected distribution name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create random data with varying number of samples</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>

<span class="c1"># Initialize model</span>
<span class="n">distr</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span>

<span class="c1"># Estimate parameters for the number of samples</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="n">dist</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">dist</span><span class="o">.</span><span class="n">model</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">],</span> <span class="n">dist</span><span class="o">.</span><span class="n">model</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span> <span class="n">dist</span><span class="o">.</span><span class="n">model</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">s</span><span class="p">])</span>
</pre></div>
</div>
<p>When we plot the results, <code class="docutils literal notranslate"><span class="pre">distfit</span></code> nicely shows that by increasing the number of samples results in a better fit of the parameters. A convergence towards mu=2 and std=0 is clearly seen.</p>
<table class="docutils align-center" id="id1">
<caption><span class="caption-text">Sampling example</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="_images/perf_sampling.png"><img alt="fig1" src="_images/perf_sampling.png" style="width: 359.1px; height: 238.5px;" /></a></p></td>
<td><p><a class="reference internal" href="_images/perf_sampling_std.png"><img alt="fig2" src="_images/perf_sampling_std.png" style="width: 360.90000000000003px; height: 235.8px;" /></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="smoothing-window">
<h2>Smoothing window<a class="headerlink" href="#smoothing-window" title="Permalink to this headline">¶</a></h2>
<p>If the number of samples is very low, it can be difficult to get a good fit on your data.
A solution is to play with the <code class="docutils literal notranslate"><span class="pre">bin</span></code> size, eg. increase bin size.
Another manner is by smoothing the histogram with the <code class="docutils literal notranslate"><span class="pre">smooth</span></code> parameter. The default is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
Lets evaluate the effect of this parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate data</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fit model without smoothing</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">distfit</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c1"># Fit model with heavy smoothing</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">distfit</span><span class="p">(</span><span class="n">smooth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils align-center" id="id2">
<caption><span class="caption-text">Comparison smoothing parameter</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="_images/gaus_mu_0_100samples.png"><img alt="logo1" src="_images/gaus_mu_0_100samples.png" style="width: 365.4px; height: 315.59999999999997px;" /></a></p></td>
<td><p><a class="reference internal" href="_images/gaus_mu_0_100samples_smooth10.png"><img alt="logo2" src="_images/gaus_mu_0_100samples_smooth10.png" style="width: 369.0px; height: 315.59999999999997px;" /></a></p></td>
</tr>
</tbody>
</table>
<p>Here we are going to combine the number of samples with the smoothing parameter.
It is interesting to see that there is no clear contribution of the smoothing. The legends depicts the smoothing window with the average <em>mu</em>.</p>
<div class="figure align-default" id="perf-sampling-mu-smoothing">
<a class="reference internal image-reference" href="_images/perf_sampling_mu_smoothing.png"><img alt="_images/perf_sampling_mu_smoothing.png" src="_images/perf_sampling_mu_smoothing.png" style="width: 625.8px; height: 412.29999999999995px;" /></a>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Save and Load.html" class="btn btn-neutral float-right" title="Save and Load" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Algorithm.html" class="btn btn-neutral float-left" title="Algorithm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Erdogan Taskesen

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>